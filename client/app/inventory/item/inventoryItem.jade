div(ng-include='"components/navbar/navbar.html"')

.container
  .row
    .col-md-12
      ul.breadcrumb
        li(ng-repeat='breadcrumb in iic.breadcrumbs')
          a(href='#') {{breadcrumb.name}}
      .row
        .col-md-3.col-xs-3
          img(ng-src='{{iic.APP_CONFIGURATION.SERVER_DEFAULT_PICTURE_ENDPOINT}}/{{iic.item.photo_thumb.photo}}')
        .col-md-7.col-xs-6
          h3
            a(ng-href='/products/{{iic.item.itemable.id}}') {{iic.item.itemable.name}}
          h5 {{iic.item.itemable.manufacturer}}
          p
            table.table.table-condensed
              tbody
                tr
                  td {{ 'CONCENTRATION' | translate }}
                  td {{iic.item.itemable.concentration}} {{iic.item.itemable.concentration_unit}}
                tr
                  td {{ 'MEDICINE_FORM' | translate }}
                  td {{iic.item.itemable.med_form}}
                tr
                  td {{ 'MFG_LOCATION' | translate }}
                  td {{iic.item.itemable.mfg_location}}
                tr
                  td Quantity
                  td {{iic.item.amount | number}}
          h5(ng-class='getStatusCSSClass(iic.item)') {{iic.pharmacare.getStatus(iic.item)}}
        .col-md-2.col-xs-3.text-right
          .btn.btn-default(ng-show='iic.isReadOnly' ng-click='iic.isReadOnly=false' style='margin-top:20px')
            i.fa.fa-pencil
            | &nbsp;Edit
      hr(ng-repeat-start='batch in iic.item.med_batches')
      form.form-horizontal(ng-repeat-end)
        .form-group
          label.col-md-2.col-xs-3.control-label {{ 'TOTAL' | translate }}
          .col-md-10.col-xs-9
            p.form-control-static {{batch.total_units | number}}
        .form-group
          label.col-md-2.col-xs-3.control-label {{ 'PRICE' | translate }}
          .col-md-10.col-xs-9
            p.form-control-static {{batch.total_price | currency:'â‚«':0}}
        .form-group
          label.col-md-2.col-xs-3.control-label {{'MANUFACTURE_DATE' | translate }}
          .col-md-10.col-xs-9
            p.input-group
              input.form-control(type='text', placeholder="{{'MANUFACTURE_DATE' | translate }}", uib-datepicker-popup='{{iic.pharmacare.getDateFormat()}}', ng-model='batch.mfg_date', is-open='pc.status[$index].opened', max-date='pc.maxDate', datepicker-options='pc.dateOptions', ng-required='true', close-text='Close', required='required' ng-disabled='iic.isReadOnly')
              span.input-group-btn
                button.btn.btn-default(type='button', ng-click='pc.open("status", $event, $index)')
                  i.glyphicon.glyphicon-calendar
        .form-group
          label.col-md-2.col-xs-3.control-label {{ 'EXPIRE_DATE' | translate }}
          .col-md-10.col-xs-9
            p.input-group
              input.form-control(type='text', placeholder="{{ 'EXPIRE_DATE' | translate }}", uib-datepicker-popup='{{iic.pharmacare.getDateFormat()}}', ng-model='batch.expire_date', is-open='pc.expStatus[$index].opened', min-date='pc.maxDate', datepicker-options='pc.dateOptions', ng-required='true', close-text='Close', required='required' ng-disabled='iic.isReadOnly')
              span.input-group-btn
                button.btn.btn-default(type='button', ng-click='pc.open("expStatus", $event, $index)')
                  i.glyphicon.glyphicon-calendar
      .row
        .col-xs-12.text-right
          .btn.btn-danger(ng-show='!iic.isReadOnly' ng-click='iic.isReadOnly=true') Cancel
          | &nbsp;&nbsp;
          .btn.btn-primary(ng-show='!iic.isReadOnly' ng-click='iic.isReadOnly=true') Save
      br
      br